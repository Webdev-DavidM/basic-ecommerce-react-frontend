(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{64:function(e,t,n){},65:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var r,a=n(1),c=n(0),s=n.n(c),i=n(31),o=n.n(i),u=(n(64),n(65),n(6)),l=n(9),j=n.n(l),d=n(12),b=n(7),p=n(22),h=n(21),m=n(24),O=n.n(m),x=Object(h.b)("users/fetchItemsByTypeStatus",function(){var e=Object(d.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("https://my-basic-ecommerce-site.herokuapp.com/shop/".concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),f=Object(h.c)({name:"shop",initialState:{items:[],showModal:!0,showSpinner:!1},reducers:{showModal:function(e,t){e.showModal=!1},showSpinner:function(e,t){e.showModal=!1,e.showSpinner=t.payload}},extraReducers:(r={},Object(p.a)(r,x.fulfilled,(function(e,t){var n=t.payload;e.items=n})),Object(p.a)(r,x.rejected,(function(e,t){return e})),r)}),v=f.actions,g=v.showSpinner,y=v.showModal,w=f.reducer;function C(){var e=Object(u.b)(),t=function(){var t=Object(d.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(g(!0));case 2:return t.next=4,e(x(n));case 4:return t.next=6,e(g(!1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"shop-container",children:[Object(a.jsx)(b.a,{variant:"success",onClick:function(){return t("clothes")},children:"Clothes"})," ",Object(a.jsx)(b.a,{variant:"warning",onClick:function(){return t("bikes")},children:"Bikes"})," ",Object(a.jsx)(b.a,{variant:"danger",onClick:function(){return t("trainers")},children:"Trainers"})," "]})}var k,N=n.p+"static/media/cycle.4d7bab90.jpg",S=Object(h.b)("users/userLogin",function(){var e=Object(d.a)(j.a.mark((function e(t,n){var r,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,a=t.password,e.next=3,O.a.post("https://my-basic-ecommerce-site.herokuapp.com/users/login",{email:r,password:a});case 3:if(c=e.sent,console.log(c.data.name),202!==c.status){e.next=7;break}return e.abrupt("return",{email:r,password:a,name:c.data.name});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),E=Object(h.b)("users/userRegister",function(){var e=Object(d.a)(j.a.mark((function e(t,n){var r,a,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,a=t.password,c=t.name,e.next=3,O.a.post("https://my-basic-ecommerce-site.herokuapp.com/users/register",{email:r,password:a,name:c});case 3:if(s=e.sent,console.log(s),201!==s.status){e.next=7;break}return e.abrupt("return",{email:r,password:a,name:c});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),I=Object(h.b)("users/adminLogin",function(){var e=Object(d.a)(j.a.mark((function e(t,n){var r,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,a=t.password,e.next=3,O.a.post("https://my-basic-ecommerce-site.herokuapp.com/users/admin-login",{email:r,password:a});case 3:if(c=e.sent,console.log(c),201!==c.status){e.next=7;break}return e.abrupt("return",{email:r,password:a});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),L=Object(h.c)({name:"users",initialState:{email:"",password:"",name:"",authenticated:null,registered:null,adminAuthenticated:!1,loginErrors:!1,cart:[]},reducers:{addToCart:function(e,t){e.cart.push(t.payload)},signOut:function(e,t){e.email="",e.password="",e.name="",e.authenticated=!1,e.adminAuthenticated=!1,e.registered=null}},extraReducers:(k={},Object(p.a)(k,S.fulfilled,(function(e,t){var n=t.payload,r=n.email,a=n.password,c=n.name;e.email=r,e.password=a,e.name=c,e.authenticated=!0,e.loginErrors=!1})),Object(p.a)(k,S.rejected,(function(e){e.authenticated=!1,e.loginErrors=!0})),Object(p.a)(k,E.fulfilled,(function(e,t){var n=t.payload,r=n.email,a=n.password,c=n.name;e.email=r,e.password=a,e.name=c,e.registered=!0,e.authenticated=!0})),Object(p.a)(k,E.rejected,(function(e){e.registered=!1})),Object(p.a)(k,I.fulfilled,(function(e,t){e.authenticated=!0,e.adminAuthenticated=!0,e.loginErrors=!1})),Object(p.a)(k,I.rejected,(function(e){e.adminAuthenticated=!1,e.loginErrors=!0})),k)}),P=L.actions,A=P.signOut,B=P.addToCart,G=L.reducer;function T(){var e=Object(u.c)((function(e){return e.shop.items})),t=Object(u.b)(),n=function(){var e=Object(d.a)(j.a.mark((function e(n,r,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(g(!0));case 2:return e.next=4,t(B({id:n,name:r,price:a}));case 4:return e.next=6,t(g(!1));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r=Object(a.jsxs)("div",{className:"landing-page",children:[Object(a.jsx)("h1",{children:" Welcome to the exercise shop, pick a category"}),Object(a.jsx)("img",{src:N,className:"cyclist",alt:"cycle"})]});return e.length>0&&(r=e.map((function(e){return Object(a.jsxs)("div",{className:"flex-item",children:[Object(a.jsx)("h2",{children:e.name}),Object(a.jsxs)("h3",{children:["\xa3",e.price]}),Object(a.jsx)("p",{children:e.description}),Object(a.jsx)("img",{src:"https://my-basic-ecommerce-site.herokuapp.com/".concat(e.image),alt:""}),Object(a.jsx)(b.a,{style:{display:"block",margin:"10px auto"},variant:"danger",onClick:function(t){return n(e._id,e.name,e.price)},children:"Add item to cart"})," "]},e._id)}))),Object(a.jsxs)(a.Fragment,{children:[r," "]})}function M(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(C,{}),Object(a.jsx)("div",{className:"shop-flex-container",children:Object(a.jsx)(T,{})})]})}var R=n(14),D=n(4),F=n(10);var W=Object(F.f)((function(e){var t=Object(c.useState)(""),n=Object(R.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)(""),o=Object(R.a)(i,2),l=o[0],p=o[1],h=Object(u.b)(),m=function(){var t=Object(d.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,h(S({email:r,password:l}));case 3:"users/userLogin/fulfilled"===t.sent.type&&e.history.push("/");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(e){"password"===e.target.type?p(e.target.value):s(e.target.value)},x=Object(u.c)((function(e){return e.users.loginErrors}));return Object(a.jsxs)("div",{className:"form",children:[Object(a.jsx)("h3",{children:"Customer sign-in"}),Object(a.jsxs)(D.a,{onSubmit:function(e){m(e)},children:[Object(a.jsxs)(D.a.Group,{controlId:"formBasicEmail",children:[Object(a.jsx)(D.a.Label,{children:"Email address"}),Object(a.jsx)(D.a.Control,{type:"email",onChange:function(e){return O(e)},placeholder:"Enter email"}),Object(a.jsx)(D.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(a.jsxs)(D.a.Group,{controlId:"formBasicPassword",children:[Object(a.jsx)(D.a.Label,{children:"Password"}),Object(a.jsx)(D.a.Control,{type:"password",onChange:function(e){return O(e)},placeholder:"Password"}),x&&Object(a.jsx)("p",{children:"Log in unsuccessful"})]}),Object(a.jsxs)("div",{className:"button-container",children:[Object(a.jsx)(b.a,{variant:"primary",type:"submit",children:"Submit"}),Object(a.jsx)(b.a,{onClick:function(){return e.history.push("/")},variant:"danger",type:"submit",children:"Cancel"})]})]})]})}));var H=Object(F.f)((function(e){var t=Object(c.useState)(""),n=Object(R.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)(""),o=Object(R.a)(i,2),l=o[0],p=o[1],h=Object(u.b)(),m=function(){var t=Object(d.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,h(I({email:r,password:l}));case 3:"users/adminLogin/fulfilled"===t.sent.type&&e.history.push("/admin");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(e){"password"===e.target.type?p(e.target.value):s(e.target.value)},x=Object(u.c)((function(e){return e.users.adminAuthenticated}));return Object(a.jsxs)("div",{className:"form",children:[Object(a.jsx)("h3",{children:"Administrator sign-in"}),Object(a.jsxs)(D.a,{onSubmit:function(e){m(e)},children:[Object(a.jsxs)(D.a.Group,{controlId:"formBasicEmail",children:[Object(a.jsx)(D.a.Label,{children:"Email address"}),Object(a.jsx)(D.a.Control,{type:"email",onChange:function(e){return O(e)},placeholder:"Enter email"}),Object(a.jsx)(D.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(a.jsxs)(D.a.Group,{controlId:"formBasicPassword",children:[Object(a.jsx)(D.a.Label,{children:"Password"}),Object(a.jsx)(D.a.Control,{type:"password",onChange:function(e){return O(e)},placeholder:"Password"}),!1===x&&Object(a.jsx)("p",{children:"Log in unsuccessful"})]}),Object(a.jsxs)("div",{className:"button-container",children:[Object(a.jsx)(b.a,{variant:"primary",type:"submit",children:"Submit"}),Object(a.jsx)(b.a,{onClick:function(){return e.history.push("/")},variant:"danger",type:"submit",children:"Cancel"})]})]})]})})),J=n(107);var K=function(e){return Object(a.jsx)("div",{className:"modal-spinner",children:Object(a.jsx)("div",{className:"container",children:Object(a.jsx)(J.a,{size:100})})})};var _=Object(F.f)((function(e){var t=Object(c.useState)(""),n=Object(R.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)(""),o=Object(R.a)(i,2),l=o[0],p=o[1],h=Object(c.useState)(""),m=Object(R.a)(h,2),O=m[0],x=m[1],f=Object(u.b)(),v=function(){var t=Object(d.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,f(E({email:r,password:l,name:O}));case 3:"users/userRegister/fulfilled"===t.sent.type&&e.history.push("/");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(e){"password"===e.target.type&&p(e.target.value),"email"===e.target.type?s(e.target.value):x(e.target.value)};return Object(a.jsxs)("div",{className:"form",children:[Object(a.jsx)("h3",{children:"Customer sign-up"}),Object(a.jsxs)(D.a,{onSubmit:function(e){v(e)},children:[Object(a.jsxs)(D.a.Group,{controlId:"formBasicEmail",children:[Object(a.jsx)(D.a.Label,{children:"Email address"}),Object(a.jsx)(D.a.Control,{type:"email",onChange:function(e){return g(e)},placeholder:"Enter email"}),Object(a.jsx)(D.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(a.jsxs)(D.a.Group,{controlId:"formBasicPassword",children:[Object(a.jsx)(D.a.Label,{children:"Password"}),Object(a.jsx)(D.a.Control,{type:"password",onChange:function(e){return g(e)},placeholder:"Password"})]}),Object(a.jsxs)(D.a.Group,{controlId:"formBasicName",children:[Object(a.jsx)(D.a.Label,{children:"Name"}),Object(a.jsx)(D.a.Control,{type:"name",onChange:function(e){return g(e)},placeholder:"Name"})]}),Object(a.jsxs)("div",{className:"button-container",children:[Object(a.jsx)(b.a,{variant:"primary",type:"submit",children:"Submit"}),Object(a.jsx)(b.a,{onClick:function(){return e.history.push("/")},variant:"danger",type:"submit",children:"Cancel"})]})]})]})})),z=n(57),V=n(41),q=n.n(V);var Q=Object(F.f)((function(e){var t=e.history,n=Object(u.c)((function(e){return e.users.authenticated})),r=Object(u.c)((function(e){return e.users.cart})),c=Object(u.c)((function(e){return e.users.name})),s=Object(u.c)((function(e){return e.users.adminAuthenticated})),i=Object(u.b)();return Object(a.jsx)(z.a,{className:"nav-bar",fluid:!0,children:n?Object(a.jsxs)(a.Fragment,{children:[s?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(b.a,{variant:"outline-secondary",onClick:function(){return t.push("/admin")},children:"Create another product"})}):null,Object(a.jsxs)("h3",{children:[" ",c&&"Hello ".concat(c)," "]}),Object(a.jsx)(b.a,{variant:"outline-secondary",onClick:function(){return i(A()),void t.push("/")},children:"Sign-out"}),Object(a.jsxs)(b.a,{variant:"outline-secondary",style:{position:"relative"},onClick:function(){return t.push("/cart")},children:[Object(a.jsx)(q.a,{style:{height:"30px"}}),Object(a.jsx)("p",{style:{color:"red",display:"inline",position:"absolute",left:"+5px",top:"8px"},children:r.length}),"Cart"]})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(b.a,{variant:"outline-secondary",onClick:function(){return t.push("/admin-sign-in")},children:"Admin sign-in"}),Object(a.jsx)(b.a,{variant:"outline-primary",onClick:function(){return t.push("/login")},children:"Customer sign-in"}),Object(a.jsx)(b.a,{variant:"outline-secondary",onClick:function(){return t.push("/register")},children:"Register"}),Object(a.jsxs)(b.a,{variant:"outline-secondary",style:{position:"relative"},onClick:function(){return t.push("/cart")},children:[Object(a.jsx)(q.a,{style:{height:"30px"}}),Object(a.jsx)("p",{style:{color:"red",display:"inline",position:"absolute",left:"+5px",top:"8px"},children:r.length}),"Cart"]})]})})})),U=Object(F.f)((function(e){var t=e.history,n=Object(c.useState)(""),r=Object(R.a)(n,2),s=r[0],i=r[1],o=Object(c.useState)(""),l=Object(R.a)(o,2),p=l[0],h=l[1],m=Object(c.useState)(""),f=Object(R.a)(m,2),v=f[0],g=f[1],y=Object(c.useState)(""),w=Object(R.a)(y,2),C=w[0],k=w[1],N=Object(c.useState)(""),S=Object(R.a)(N,2),E=S[0],I=S[1],L=Object(u.b)(),P=function(){var e=Object(d.a)(j.a.mark((function e(){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("category",s),n.append("productImage",E),n.append("name",p),n.append("description",C),n.append("price",v),r={headers:{"content-type":"multipart/form-data"}},e.next=9,O.a.post("https://my-basic-ecommerce-site.herokuapp.com/shop/create",n,r);case 9:201===e.sent.status&&(t.push("/"),L(x(s)));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(e){switch(e.target.getAttribute("id")){case"category":return i(e.target.value);case"name":return h(e.target.value);case"price":return g(e.target.value);case"description":return k(e.target.value);case"image":return I(e.target.files[0]);default:return}};return Object(a.jsxs)("div",{className:"admin-form-container",children:[Object(a.jsx)("h3",{children:"Please create the product below to add it to the website and database"}),Object(a.jsxs)(D.a,{children:[Object(a.jsxs)(D.a.Group,{controlId:"category",onChange:function(e){return A(e)},children:[Object(a.jsx)(D.a.Label,{children:"Product category"}),Object(a.jsxs)(D.a.Control,{as:"select",defaultValue:"Choose...",children:[Object(a.jsx)("option",{children:"Choose a product category "}),Object(a.jsx)("option",{value:"bikes",children:"Bike"}),Object(a.jsx)("option",{value:"trainers",children:"Trainers"}),Object(a.jsx)("option",{value:"clothes",children:"Clothes"})]})]}),Object(a.jsxs)(D.a.Group,{controlId:"name",onChange:function(e){return A(e)},children:[Object(a.jsx)(D.a.Label,{children:"Name"}),Object(a.jsx)(D.a.Control,{type:"name",placeholder:"Enter product name"}),Object(a.jsx)(D.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(a.jsxs)(D.a.Group,{controlId:"price",onChange:function(e){return A(e)},children:[Object(a.jsx)(D.a.Label,{children:"Price"}),Object(a.jsx)(D.a.Control,{type:"price",placeholder:"enter a price"})]}),Object(a.jsx)(D.a.Group,{controlId:"formBasicCheckbox",children:Object(a.jsxs)(D.a.Group,{controlId:"description",onChange:function(e){return A(e)},children:[Object(a.jsx)(D.a.Label,{children:"Description"}),Object(a.jsx)(D.a.Control,{as:"textarea",rows:3})]})}),Object(a.jsx)(D.a.Group,{controlId:"image",onChange:function(e){return A(e)},children:Object(a.jsx)(D.a.File,{label:"Please upload a product photo"})})]}),Object(a.jsxs)("div",{className:"button-container",children:[Object(a.jsx)(b.a,{variant:"primary",type:"submit",onClick:function(){return P()},children:"Submit"}),Object(a.jsx)(b.a,{onClick:function(){return t.push("/")},variant:"danger",type:"submit",children:"Cancel"})]})]})}));var X=function(e){var t=Object(u.c)((function(e){return e.users.cart})),n=Object(a.jsx)("h3",{children:"Nothing in cart"});return t.length>0&&(n=t.map((function(e){return Object(a.jsxs)("div",{className:"cart-item",children:[Object(a.jsx)("h3",{children:e.name}),Object(a.jsxs)("h5",{children:["Price :\xa3",e.price]})]},e.id)}))),Object(a.jsxs)("div",{className:"cart",children:[Object(a.jsx)("h1",{children:"Cart"}),Object(a.jsx)("div",{className:"cart-flex-container",children:n}),t.length?Object(a.jsxs)("div",{className:"button-container",children:[Object(a.jsx)(b.a,{variant:"primary",onClick:function(){return e.history.push("/register")},children:"Buy"}),Object(a.jsx)(b.a,{variant:"danger",onClick:function(){return e.history.push("/")},children:"Keep Shopping"})]}):null]})};var Y=function(e){var t=Object(u.b)();return Object(a.jsx)("div",{className:"modal",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("h4",{children:"How to use and navigate this site"}),Object(a.jsxs)("p",{children:["This e-commerce site is built with the latest version of Redux and uses React useSelector and useDispatch hooks to update the state in Redux. It connects to a backend API created with Express and MongoDB. The admin login section allows you to create products and add images which are dealt with on the server using the multer npm package."," ",Object(a.jsx)("br",{}),Object(a.jsx)("span",{children:"Login info"}),Object(a.jsx)("br",{}),"Admin login: username: admin@company.com, password: admin123",Object(a.jsx)("br",{}),"Customer login: username: user@shop.com, password: buy1"]}),Object(a.jsx)(b.a,{variant:"primary",onClick:function(){t(y())},children:"OK"})]})})},Z=n(26);var $=function(){var e=Object(u.c)((function(e){return e.users.adminAuthenticated})),t=Object(u.c)((function(e){return e.shop.showModal})),n=Object(u.c)((function(e){return e.shop.showSpinner})),r=t?Object(a.jsx)(Y,{}):null,c=n?Object(a.jsx)(K,{}):null;return Object(a.jsxs)(Z.a,{basename:"/basic-ecommerce-react-frontend",children:[Object(a.jsxs)("div",{className:"App",children:[c,r,Object(a.jsx)(Q,{})]}),Object(a.jsx)(F.b,{exact:!0,path:"/",component:M}),Object(a.jsx)(F.b,{exact:!0,path:"/login",component:W}),Object(a.jsx)(F.b,{exact:!0,path:"/register",component:_}),Object(a.jsx)(F.b,{exact:!0,path:"/admin-sign-in",component:H}),Object(a.jsx)(F.b,{exact:!0,path:"/admin",children:e?Object(a.jsx)(U,{}):Object(a.jsx)(F.a,{from:"/admin",to:"/"})}),Object(a.jsx)(F.b,{exact:!0,path:"/cart",component:X})]})},ee=Object(h.a)({reducer:{users:G,shop:w}});n(92);o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(u.a,{store:ee,children:Object(a.jsx)($,{})})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.eb8ae00d.chunk.js.map